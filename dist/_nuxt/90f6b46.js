(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{592:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">\n<path d="M11 11H7M11 7V11V7ZM11 11V15V11ZM11 11H15H11Z" stroke-width="2" stroke-linecap="round"/>\n<path d="M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z" stroke-width="2"/>\n</svg>\n'},596:function(t,e,o){var content=o(638);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("06bedefb",content,!0,{sourceMap:!1})},634:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">\n<path d="M10.9998 10.9999L8.04341 8.30552M13.6942 8.04351L10.9998 10.9999L13.6942 8.04351ZM10.9998 10.9999L8.30542 13.9563L10.9998 10.9999ZM10.9998 10.9999L13.9562 13.6943L10.9998 10.9999Z" stroke-width="2" stroke-linecap="round"/>\n<path d="M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z" stroke-width="2"/>\n</svg>\n'},635:function(t,e){t.exports='<svg width="21" height="21" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 19.6875C12.9367 19.6875 15.2736 18.7195 16.9965 16.9965C18.7195 15.2736 19.6875 12.9367 19.6875 10.5C19.6875 8.06332 18.7195 5.72645 16.9965 4.00346C15.2736 2.28047 12.9367 1.3125 10.5 1.3125C8.06332 1.3125 5.72645 2.28047 4.00346 4.00346C2.28047 5.72645 1.3125 8.06332 1.3125 10.5C1.3125 12.9367 2.28047 15.2736 4.00346 16.9965C5.72645 18.7195 8.06332 19.6875 10.5 19.6875ZM10.5 0C13.2848 0 15.9555 1.10625 17.9246 3.07538C19.8938 5.04451 21 7.71523 21 10.5C21 13.2848 19.8938 15.9555 17.9246 17.9246C15.9555 19.8938 13.2848 21 10.5 21C7.71523 21 5.04451 19.8938 3.07538 17.9246C1.10625 15.9555 0 13.2848 0 10.5C0 7.71523 1.10625 5.04451 3.07538 3.07538C5.04451 1.10625 7.71523 0 10.5 0ZM5.90625 9.84375C5.7322 9.84375 5.56528 9.91289 5.44221 10.036C5.31914 10.159 5.25 10.326 5.25 10.5C5.25 10.674 5.31914 10.841 5.44221 10.964C5.56528 11.0871 5.7322 11.1563 5.90625 11.1563L13.5096 11.1563L10.6916 13.9729C10.5684 14.0961 10.4992 14.2632 10.4992 14.4375C10.4992 14.6118 10.5684 14.7789 10.6916 14.9021C10.8149 15.0254 10.982 15.0946 11.1563 15.0946C11.3305 15.0946 11.4976 15.0254 11.6209 14.9021L15.5584 10.9646C15.6195 10.9037 15.668 10.8312 15.7011 10.7515C15.7341 10.6718 15.7512 10.5863 15.7512 10.5C15.7512 10.4137 15.7341 10.3282 15.7011 10.2485C15.668 10.1688 15.6195 10.0963 15.5584 10.0354L11.6209 6.09787C11.4976 5.97465 11.3305 5.90542 11.1563 5.90542C10.982 5.90542 10.8149 5.97465 10.6916 6.09787C10.5684 6.2211 10.4992 6.38823 10.4992 6.5625C10.4992 6.73677 10.5684 6.9039 10.6916 7.02713L13.5096 9.84375L5.90625 9.84375Z" />\n</svg>\n'},636:function(t,e){t.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M9 7V0H7V7H0V9H7V16H9V9H16V7H9Z" fill="white"/>\n</svg>\n'},637:function(t,e,o){"use strict";o(596)},638:function(t,e,o){var n=o(27)(!1);n.push([t.i,'.wtps-add{display:flex;justify-content:space-between;align-items:center;background-color:#6fcf97;fill:#fff;color:#fff;font-size:16px;line-height:24px;padding:16px 54px 16px 16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.wtps__list{border:1px solid #ccc;border-radius:10px;padding-top:15px;margin-top:-15px;height:600px;overflow-y:scroll}.wtps__input{flex:1;width:100%;height:58px;background-color:transparent;border:2px solid #e8e8e8;border-radius:10px;padding-left:25px;padding-right:25px;color:#000;font-weight:500;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none!important;background-color:#fff;position:relative;z-index:3}.wtps__input:disabled{color:#b0b0b0}.wtps__input--error{border-color:red}.wtps__input::-moz-placeholder{font-size:15px;font-weight:500;color:#b0b0b0;line-height:16px}.wtps__input:-ms-input-placeholder{font-size:15px;font-weight:500;color:#b0b0b0;line-height:16px}.wtps__input::placeholder{font-size:15px;font-weight:500;color:#b0b0b0;line-height:16px}.wtps__input:not(:disabled):active,.wtps__input:not(:disabled):focus,.wtps__input:not(:disabled)[focus-within]{border-color:#2091f9}.wtps__input:not(:disabled):active,.wtps__input:not(:disabled):focus,.wtps__input:not(:disabled):focus-within{border-color:#2091f9}.wtps__label{font-weight:500;font-size:16px;line-height:28px;color:#252b42;margin-bottom:8px;display:block}.wtps-row{display:flex;align-items:center;justify-content:space-between;padding:8px 50px 8px 15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;position:relative}.wtps-row--select .wtps-row__title{color:#666;font-weight:700}.wtps-row:after{bottom:0;left:0;right:0;height:1px;z-index:2;position:absolute;content:"";background-color:#ccc}.wtps-row--folder{padding-top:16px;padding-bottom:16px}.wtps-row--active{background-color:#2f80ed}.wtps-row--active:after{display:none}.wtps-row--active .wtps-row__text,.wtps-row--active .wtps-row__title{color:#fff}.wtps-row__icon{cursor:pointer}.wtps-row__icon-plus{fill:transparent;stroke:#2091f9}.wtps-row__icon-more{fill:#2091f9}.wtps-row--active .wtps-row__icon-plus{fill:transparent;stroke:#fff}.wtps-row--active .wtps-row__icon-more{fill:#fff}.wtps-row__control,.wtps-row__icon{display:flex;justify-content:center;align-items:center}.wtps-row__control{margin-left:25px}.wtps-row__title{text-transform:uppercase}.wtps-row__text,.wtps-row__title{font-size:16px;line-height:24px;color:#666}',""]),t.exports=n},815:function(t,e,o){"use strict";o.r(e);o(17),o(11),o(24),o(25);var n=o(141),r=o(18),c=o(5),l=(o(74),o(53),o(284),o(20),o(36),o(143),o(31),o(52),o(76),o(13),o(14),o(607)),d=o.n(l),w=o(592),f=o.n(w),_=o(634),h=o.n(_),v=o(635),m=o.n(v),x=o(636),C=o.n(x);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P={props:["label","items","city"],data:function(){return{iconPlus:f.a,iconDelete:h.a,iconMore:m.a,iconPlusLine:C.a,searchStr:"",totalSearchStr:"",openFolderIds:[],selectItem:null,selectParent:null,itemsSearch:[],child:[]}},computed:{rows:function(){var t=this;return this.searchStr.length>2?this.itemsSearch:this.items.map((function(e){var o;return k(k({},e),{},{items:null===(o=t.child.find((function(i){return i.parent===e.id})))||void 0===o?void 0:o.items})}))},isExactMatch:function(){return 1===this.rows.filter((function(t){return!t.is_folder})).length}},watch:{searchStr:function(t,e){t.length>3&&this.debouncedGetAnswer()}},created:function(){this.debouncedGetAnswer=d.a.debounce(this.search,300)},methods:{onPressItem:function(t){var e=this,o=t.rates.find((function(t){return t.city.id===e.city}));this.$store.commit("mwaw/open",{source_work_type:t.id,name:t.name,unit:t.unit,rate:o,quantity:"",is_brigade:!1})},onPressFolder:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e.openFolderIds.includes(t)){o.next=5;break}e.child=e.child.filter((function(e){return e.parent!==t})),e.openFolderIds=e.openFolderIds.filter((function(e){return e!==t})),o.next=16;break;case 5:return o.prev=5,e.openFolderIds=[].concat(Object(n.a)(e.openFolderIds),[t]),o.next=9,e.$axios.get("/api/catalogs/work-types/?limit=100000&parent=".concat(t,"&rates_city=").concat(e.city));case 9:r=o.sent,e.child=[].concat(Object(n.a)(e.child),[{parent:t,items:r.data.results}]),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(5),console.log(o.t0);case 16:case"end":return o.stop()}}),o,null,[[5,13]])})))()},onPressRow:function(t){if(!Object(n.a)(event.target.parentNode.classList).includes("wtps-row__icon"))if(t.is_folder)this.onPressFolder(t.id);else{if(this.selectItem===t.id)return this.selectItem=null,void(this.selectParent=null);this.selectItem=t.id,this.selectParent=t.parent.id,this.onPressItem(t)}},search:function(){var t=this;this.$axios.get("/api/catalogs/work-types/?limit=100000&search=".concat(this.searchStr,"&rates_city=").concat(this.city)).then((function(e){t.itemsSearch=e.data.results;var o=[];e.data.results.forEach((function(t){t.is_folder&&o.push(t.id)})),t.openFolderIds=o})).catch((function(t){console.log(t)}))}}},M=(o(637),o(8)),component=Object(M.a)(P,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wtps"},[o("div",{staticClass:"wtps__label"},[t._v("Выберите тип работ:")]),t._v(" "),o("div",{staticClass:"wtps__field"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],staticClass:"wtps__input",attrs:{type:"text",placeholder:"Поле ввода для поиска"},domProps:{value:t.searchStr},on:{input:function(e){e.target.composing||(t.searchStr=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"wtps__list"},[o("div",{staticClass:"wtps-add",on:{click:function(e){return t.$store.commit("mwa/open")}}},[o("div",{staticClass:"wtps-add__text"},[t._v("Добавить тип работ")]),t._v(" "),o("div",{staticClass:"wtps-add__icon",domProps:{innerHTML:t._s(t.iconPlusLine)}})]),t._v(" "),t._l(t.rows,(function(e){return o("div",{key:e.id,staticClass:"wtps-rw"},[t.isExactMatch&&e.is_folder?t._e():o("div",{staticClass:"wtps-row",class:{"wtps-row--folder":e.is_folder,"wtps-row--active":e.is_folder?t.openFolderIds.includes(e.id):t.selectItem===e.id,"wtps-row--select":t.selectParent===e.id},on:{click:function(o){return t.onPressRow(e)}}},[e.is_folder?o("div",{staticClass:"wtps-row__title"},[t._v("\n          "+t._s(e.name)+"\n        ")]):o("div",{staticClass:"wtps-row__text"},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),e.is_folder?o("div",{staticClass:"wtps-row__control"},[t.openFolderIds.includes(e.id)?o("div",{staticClass:"wtps-row__icon wtps-row__icon-plus",domProps:{innerHTML:t._s(t.iconDelete)}}):o("div",{staticClass:"wtps-row__icon wtps-row__icon-plus",domProps:{innerHTML:t._s(t.iconPlus)}})]):o("div",{staticClass:"wtps-row__control"},[o("div",{staticClass:"wtps-row__icon wtps-row__icon-more",domProps:{innerHTML:t._s(t.iconMore)},on:{click:function(o){return t.onPressItem(e)}}})])]),t._v(" "),e.items?o("div",{staticClass:"wtps-items"},t._l(e.items,(function(e){return o("div",{key:"it"+e.id,staticClass:"wtps-row",class:{"wtps-row--active":t.selectItem===e.id},on:{click:function(o){return t.onPressRow(e)}}},[o("div",{staticClass:"wtps-row__text"},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),o("div",{staticClass:"wtps-row__control"},[o("div",{staticClass:"wtps-row__icon wtps-row__icon-more",domProps:{innerHTML:t._s(t.iconMore)},on:{click:function(o){return t.onPressItem(e)}}})])])})),0):t._e()])}))],2)])}),[],!1,null,null,null);e.default=component.exports}}]);